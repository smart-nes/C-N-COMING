<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Content Plan for Canary Hotel BY SOCIAL NEST</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts: Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-bg: #121212;
            --secondary-bg: #1e1e1e;
            --text-color: #ff2600;
            --header-bg: #9e1b00;
            --accent-color: #ff9a4d;
            --table-row-even: rgba(241, 196, 15, 0.05);
            --table-glow: rgba(255, 123, 0, 0.3);
        }
        
        .light-mode {
            --primary-bg: #ff2600;
            --secondary-bg: #ec0505;
            --text-color: #212529;
            --header-bg: #d32405;
            --accent-color: #ff7b00;
            --table-row-even: rgba(241, 196, 15, 0.1);
            --table-glow: rgba(255, 123, 0, 0.1);
        }
        
        /* إعدادات أساسية للاستجابة */
        html {
            font-size: 16px;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            background-color: var(--primary-bg);
            color: var(--text-color);
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            transition: background-color 0.3s, color 0.3s;
            width: 100%;
            min-height: 100vh;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            -webkit-touch-callout: none;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }
        
        h1 {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 700;
            font-size: 2rem;
        }
        
        .description {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        /* تعديلات للجدول */
        .table-responsive {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .table {
            background-color: var(--secondary-bg);
            border-radius: 10px;
            box-shadow: 0 0 15px var(--table-glow);
            transition: all 0.3s;
            min-width: 600px;
            width: 100%;
        }
        
        .table th {
            background-color: var(--accent-color);
            color: #FFFFFF;
            font-weight: 700;
            text-align: center;
            padding: 12px 8px;
        }
        
        .table td {
            text-align: center;
            vertical-align: middle;
            color: var(--text-color);
            padding: 10px 8px;
        }
        
        .table tr:nth-child(even) {
            background-color: var(--table-row-even);
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: var(--text-color);
            font-weight: 700;
        }
        
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 40px;
            color: rgba(255, 0, 0, 0.1);
            pointer-events: none;
            z-index: 1000;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
        }
        
        .language-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
        }
        
        .dark-mode-toggle {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
        }
        
        .btn-language, .btn-dark-mode {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            min-height: 44px;
            touch-action: manipulation;
        }
        
        /* Modal Styles */
        .modal-content {
            background-color: var(--secondary-bg);
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            width: 95%;
            max-width: 500px;
            margin: 20px auto;
        }
        
        .modal-header {
            border-bottom: 1px solid var(--accent-color);
        }
        
        .modal-footer {
            border-top: 1px solid var(--accent-color);
        }
        
        .form-control {
            background-color: var(--primary-bg);
            color: var(--text-color);
            border: 1px solid var(--accent-color);
            font-size: 1rem;
            padding: 10px;
            height: auto;
        }
        
        .form-control:focus {
            background-color: var(--primary-bg);
            color: var(--text-color);
            border-color: var(--accent-color);
            box-shadow: 0 0 0 0.25rem rgba(255, 154, 77, 0.25);
        }
        
        .error-message {
            color: #ff6b6b;
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }
        
        /* Geolocation Modal */
        .geolocation-modal .modal-body {
            text-align: center;
            padding: 30px;
        }
        
        .geolocation-icon {
            font-size: 64px;
            margin-bottom: 20px;
            color: var(--accent-color);
        }
        
        /* Anti-Inspect Styles */
        #no-inspect {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: black;
            color: white;
            z-index: 9999;
            text-align: center;
            padding-top: 20%;
            font-size: 24px;
        }
        
        /* منع تغيير أحجام العناصر عند التكبير */
        * {
            -webkit-text-size-adjust: none;
            text-size-adjust: none;
            -moz-text-size-adjust: none;
            -ms-text-size-adjust: none;
        }
        
        /* إصلاح مشاكل بعض المتصفحات */
        input, button, textarea, select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            font-size: 1rem;
        }
        
        /* تعديلات للشاشات الصغيرة */
        @media (max-width: 768px) {
            html {
                font-size: 14px;
            }
            
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .description {
                font-size: 1rem;
            }
            
            .watermark {
                font-size: 24px;
            }
            
            .btn-language, .btn-dark-mode {
                padding: 8px 12px;
                font-size: 0.9rem;
            }
        }
        
        /* إصلاح مشاكل الزوم على الهواتف */
        @media screen and (max-width: 480px) {
            input, select, textarea {
                font-size: 16px;
            }
            
            .modal {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                overflow-y: auto;
            }
            
            .language-switcher, .dark-mode-toggle {
                position: static;
                margin-bottom: 10px;
                text-align: center;
            }
        }
        
        /* علامة مائية للحماية */
        body::after {
            content: "محمي © Social Nest";
            position: fixed;
            bottom: 10px;
            right: 10px;
            opacity: 0.5;
            font-size: 16px;
            color: red;
            z-index: 9999;
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Anti-Inspect Overlay -->
    <div id="no-inspect" style="display: none;">
        <h1>Developer Tools are Disabled</h1>
        <p>This page has restricted access to developer tools for security reasons.</p>
    </div>

    <!-- Geolocation Modal -->
    <div class="modal fade geolocation-modal" id="geolocationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="geolocationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="geolocationModalLabel">تفعيل الموقع الجغرافي</h5>
                </div>
                <div class="modal-body">
                    <div class="geolocation-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <p id="geolocationMessage">للاستمرار، يجب تفعيل خدمة الموقع الجغرافي للتحقق من موقعك.</p>
                    <div id="geolocationError" class="text-danger" style="display: none;">تم رفض الإذن. يرجى تفعيل الموقع الجغرافي للاستمرار.</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="enableGeolocation">تفعيل الموقع الجغرافي</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Password Modal -->
    <div class="modal fade" id="passwordModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="passwordModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="passwordModalLabel">تسجيل الدخول</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="usernameInput" class="form-label">اسم المستخدم:</label>
                        <input type="text" class="form-control" id="usernameInput" placeholder="أدخل اسم المستخدم (أحرف فقط)">
                        <div id="usernameError" class="error-message">اسم المستخدم يجب أن يحتوي على أحرف فقط ولا يحتوي على أرقام.</div>
                    </div>
                    <div class="mb-3">
                        <label for="passwordInput" class="form-label">كلمة المرور:</label>
                        <input type="password" class="form-control" id="passwordInput" placeholder="أدخل كلمة المرور">
                    </div>
                    <div id="passwordError" class="text-danger" style="display: none;">اسم المستخدم أو كلمة المرور غير صحيحة. يرجى المحاولة مرة أخرى.</div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="submitLogin">تسجيل الدخول</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content (hidden by default) -->
    <div id="mainContent" style="display: none;">
        <div class="container">
            <div class="language-switcher">
                <button id="languageToggle" class="btn-language">العربية</button>
            </div>
            <div class="dark-mode-toggle">
                <button id="darkModeToggle" class="btn-dark-mode"><i class="fas fa-sun"></i></button>
            </div>
            
            <h1 id="mainTitle">Monthly Content Plan for Canary Hotel</h1>
            <p id="mainDescription" class="description">Weekly marketing plan for Canary Hotel's social media channels with interactive and engaging content.</p>
            <div class="watermark">Social Nest</div>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th id="weekHeader">Week</th>
                            <th id="titleHeader">Reels Title</th>
                            <th id="typeHeader">Story Type</th>
                            <th id="ideaHeader">Interaction Idea</th>
                            <th id="styleHeader">Filming Style</th>
                            <th id="colorsHeader">Suggested Colors</th>
                            <th id="tipsHeader">Execution Tips</th>
                        </tr>
                    </thead>
                    <tbody id="contentTableBody">
                        <!-- Content will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div class="footer">
                <p id="footerText">Social Nest</p>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
 // =================================================
// Content Data Structure (English as primary)
// =================================================
const contentData = {
    en: [
        // Week 1 Content
        {
            week: "Week 1",
            title: "Room Tour",
            type: "Interactive Story",
            idea: "\"Double bed or King size?\"",
            style: "Soft shots, natural light, angles from inside the room",
            colors: "Beige, White, Wooden",
            tips: "Use natural light",
            ar: {
                week: "الأسبوع 1",
                title: "جولة في الغرف",
                type: "استوري تفاعلي",
                idea: "\"سرير مزدوج ولا كينج؟\"",
                style: "لقطات ناعمة، ضوء طبيعي، زوايا من داخل الغرفة",
                colors: "بيج، أبيض، خشبي",
                tips: "استخدام ضوء طبيعي"
            }
        },
        {
            week: "Week 1",
            title: "Hospitality Details",
            type: "Interactive Story",
            idea: "\"How do you like to be welcomed on your first day?\"",
            style: "Slow motion shots of staff during preparation",
            colors: "Beige with warm touches",
            tips: "Focus on faces and smiles",
            ar: {
                week: "الأسبوع 1",
                title: "تفاصيل الضيافة",
                type: "استوري تفاعلي",
                idea: "\"تحب تستقبل إزاي أول يوم؟\"",
                style: "لقطات للطاقم - Slow Motion وقت التحضير",
                colors: "بيج + لمسات دافئة",
                tips: "التركيز على الوجوه والابتسامات"
            }
        },
        {
            week: "Week 1",
            title: "First Sight",
            type: "Interactive Story",
            idea: "\"What's the first thing you do when you arrive?\"",
            style: "Angle from the door - camera follows the guest",
            colors: "Sea color in background",
            tips: "Natural sound - realistic shot",
            ar: {
                week: "الأسبوع 1",
                title: "أول مشهد بتشوفه",
                type: "استوري تفاعلي",
                idea: "\"أول حاجة تعملها أول ما توصل؟\"",
                style: "زاوية من الباب - كاميرا تمشي مع الضيف",
                colors: "لون البحر بالخلفية",
                tips: "صوت طبيعي - لقطة واقعية"
            }
        },

        // Week 2 Content
        {
            week: "Week 2",
            title: "Canary Sunset",
            type: "Interactive Story",
            idea: "\"Who would you like to watch the sunset with?\"",
            style: "Shot from the sea - setting sunlight",
            colors: "Orange + Blue",
            tips: "Film 30 minutes before sunset",
            ar: {
                week: "الأسبوع 2",
                title: "غروب كناري",
                type: "استوري تفاعلي",
                idea: "\"تحب تتفرج على الغروب مع مين؟\"",
                style: "لقطة من البحر - ضوء الشمس نازل",
                colors: "برتقالي + أزرق",
                tips: "وقت التصوير قبل الغروب بـ30 دقيقة"
            }
        },
        {
            week: "Week 2",
            title: "Dinner by the Sea",
            type: "Interactive Story",
            idea: "\"Who would you surprise?\"",
            style: "Angle above the table - soft lighting",
            colors: "Gold + Dark Blue",
            tips: "Candles + fixed camera",
            ar: {
                week: "الأسبوع 2",
                title: "عشاء على البحر",
                type: "استوري تفاعلي",
                idea: "\"تعمل مفاجأة لمين؟\"",
                style: "زاوية فوق الطاولة - إضاءة خفيفة",
                colors: "ذهبي + أزرق غامق",
                tips: "شمع + كاميرا ثابتة"
            }
        },
        {
            week: "Week 2",
            title: "Canary for Couples",
            type: "Interactive Story",
            idea: "\"Share your most romantic moment with us\"",
            style: "Changing shots of couples - Slow motion",
            colors: "Natural - Blue - Green",
            tips: "Soft movements + authentic",
            ar: {
                week: "الأسبوع 2",
                title: "كناري للأزواج",
                type: "استوري تفاعلي",
                idea: "\"شاركنا أجمل لحظة رومانسية عشتها\"",
                style: "لقطات متغيرة لأزواج - Slow Motion",
                colors: "طبيعي - أزرق - أخضر",
                tips: "حركات ناعمة + حقيقية"
            }
        },

        // Week 3 Content
        {
            week: "Week 3",
            title: "Breakfast by the Sea",
            type: "Interactive Story",
            idea: "\"Do you prefer breakfast in room or by the sea?\"",
            style: "Overhead shot of plate + sea view",
            colors: "White + Food colors",
            tips: "Film immediately after preparation",
            ar: {
                week: "الأسبوع 3",
                title: "فطار على البحر",
                type: "استوري تفاعلي",
                idea: "\"تحب تفطر في الأوضة ولا على البحر؟\"",
                style: "لقطة من فوق للطبق + البحر",
                colors: "أبيض + ألوان الأكل",
                tips: "تصوير فوري بعد تحضير الفطار"
            }
        },
        {
            week: "Week 3",
            title: "From Kitchen to Table",
            type: "Interactive Story",
            idea: "\"What would you like to see from the kitchen?\"",
            style: "From inside kitchen - soft sound",
            colors: "Warm tones - Kitchen fire",
            tips: "Stable mobile - close shots",
            ar: {
                week: "الأسبوع 3",
                title: "من المطبخ للترابيزة",
                type: "استوري تفاعلي",
                idea: "\"تحب تشوف إيه من المطبخ؟\"",
                style: "من داخل المطبخ - صوت ناعم",
                colors: "نغمات دافئة - نار المطبخ",
                tips: "موبايل ثابت - لقطات مقربة"
            }
        },
        {
            week: "Week 3",
            title: "Relaxation Time",
            type: "Interactive Story",
            idea: "\"Where do you prefer to relax most?\"",
            style: "Pool shot - long take",
            colors: "Turquoise + Beige",
            tips: "Single angle - static image",
            ar: {
                week: "الأسبوع 3",
                title: "وقت الراحة",
                type: "استوري تفاعلي",
                idea: "\"تحب ترتاح فين أكتر؟\"",
                style: "لقطة من البيسين - لقطة طويلة",
                colors: "فيروزي + بيج",
                tips: "زاوية واحدة - صورة ثابتة"
            }
        },

        // Week 4 Content
        {
            week: "Week 4",
            title: "Relaxation Moments",
            type: "Interactive Story",
            idea: "\"Massage or breakfast first?\"",
            style: "Side angle - Spa + music",
            colors: "Soft Gray + Beige",
            tips: "Calming sound - no talking",
            ar: {
                week: "الأسبوع 4",
                title: "لحظات استرخاء",
                type: "استوري تفاعلي",
                idea: "\"مساج ولا فطار أول؟\"",
                style: "زاوية من الجنب - سبا + موسيقى",
                colors: "رمادي ناعم + بيج",
                tips: "صوت مهدّئ - بدون كلام"
            }
        },
        {
            week: "Week 4",
            title: "Complete Spa Experience",
            type: "Interactive Story",
            idea: "\"Would you like to try the Spa?\"",
            style: "Wide angle of room - candles",
            colors: "White + Simple Green",
            tips: "Arrange space before filming",
            ar: {
                week: "الأسبوع 4",
                title: "تجربة Spa كاملة",
                type: "استوري تفاعلي",
                idea: "\"تحب تجرب السبا؟\"",
                style: "زاوية عريضة للغرفة - شموع",
                colors: "أبيض + أخضر بسيط",
                tips: "ترتيب المكان قبل التصوير"
            }
        },
        {
            week: "Week 4",
            title: "Quiet Day",
            type: "Interactive Story",
            idea: "\"Which moment do you enjoy the most?\"",
            style: "Different scenes throughout the day",
            colors: "Varied but soft colors",
            tips: "Light editing + simple music",
            ar: {
                week: "الأسبوع 4",
                title: "يوم هادي",
                type: "استوري تفاعلي",
                idea: "\"أي لحظة أكتر حاجة بتحبها؟\"",
                style: "مشاهد مختلفة طوال اليوم",
                colors: "ألوان متنوعة لكن ناعمة",
                tips: "مونتاج خفيف + موسيقى بسيطة"
            }
        }
    ]
};

// =================================================
// Application State
// =================================================
let currentLanguage = 'en'; // Default to English
let userPosition = null;
let usernameInput = null;

// =================================================
// Core Functions
// =================================================

/**
 * Populates the content table based on selected language
 */
function populateTable(language) {
    const tableBody = document.getElementById('contentTableBody');
    tableBody.innerHTML = '';
    
    contentData.en.forEach(item => {
        const row = document.createElement('tr');
        
        if (language === 'ar') {
            row.innerHTML = `
                <td>${item.ar.week}</td>
                <td>${item.ar.title}</td>
                <td>${item.ar.type}</td>
                <td>${item.ar.idea}</td>
                <td>${item.ar.style}</td>
                <td>${item.ar.colors}</td>
                <td>${item.ar.tips}</td>
            `;
        } else {
            row.innerHTML = `
                <td>${item.week}</td>
                <td>${item.title}</td>
                <td>${item.type}</td>
                <td>${item.idea}</td>
                <td>${item.style}</td>
                <td>${item.colors}</td>
                <td>${item.tips}</td>
            `;
        }
        
        tableBody.appendChild(row);
    });
}

/**
 * Updates all UI elements based on selected language
 */
function updateLanguage() {
    // Update table content
    populateTable(currentLanguage);
    
    // Update UI elements
    document.getElementById('mainTitle').textContent = 
        currentLanguage === 'en' 
        ? "Monthly Content Plan for Canary Hotel" 
        : "خطة المحتوى الشهرية لفندق كناري";
        
    document.getElementById('mainDescription').textContent = 
        currentLanguage === 'en' 
        ? "Weekly marketing plan for Canary Hotel's social media channels with interactive and engaging content."
        : "خطة تسويقية أسبوعية لقنوات التواصل الاجتماعي لفندق كناري بمحتوى تفاعلي وجذاب.";
    
    // Update table headers
    document.getElementById('weekHeader').textContent = currentLanguage === 'en' ? "Week" : "الأسبوع";
    document.getElementById('titleHeader').textContent = currentLanguage === 'en' ? "Reels Title" : "عنوان الريلز";
    document.getElementById('typeHeader').textContent = currentLanguage === 'en' ? "Story Type" : "نوع الاستوري";
    document.getElementById('ideaHeader').textContent = currentLanguage === 'en' ? "Interaction Idea" : "فكرة التفاعل";
    document.getElementById('styleHeader').textContent = currentLanguage === 'en' ? "Filming Style" : "ستايل التصوير";
    document.getElementById('colorsHeader').textContent = currentLanguage === 'en' ? "Suggested Colors" : "الألوان المقترحة";
    document.getElementById('tipsHeader').textContent = currentLanguage === 'en' ? "Execution Tips" : "نصائح تنفيذ";
    
    // Update footer
    document.getElementById('footerText').textContent = 
        currentLanguage === 'en' 
        ? "Social Nest" 
        : "Social Nest | سوشيال نيست";
    
    // Update language toggle button
    document.getElementById('languageToggle').textContent = 
        currentLanguage === 'en' 
        ? "العربية" 
        : "English";
    
    // Update direction and alignment
    if (currentLanguage === 'ar') {
        document.documentElement.lang = 'ar';
        document.documentElement.dir = 'rtl';
        document.querySelector('.language-switcher').style.right = '10px';
        document.querySelector('.language-switcher').style.left = 'auto';
        document.querySelector('.dark-mode-toggle').style.left = '10px';
        document.querySelector('.dark-mode-toggle').style.right = 'auto';
    } else {
        document.documentElement.lang = 'en';
        document.documentElement.dir = 'ltr';
        document.querySelector('.language-switcher').style.right = 'auto';
        document.querySelector('.language-switcher').style.left = '10px';
        document.querySelector('.dark-mode-toggle').style.left = 'auto';
        document.querySelector('.dark-mode-toggle').style.right = '10px';
    }
}

/**
 * Toggles between dark and light mode
 */
function toggleDarkMode() {
    document.body.classList.toggle('light-mode');
    if (document.body.classList.contains('light-mode')) {
        document.getElementById('darkModeToggle').innerHTML = '<i class="fas fa-moon"></i>';
        document.body.classList.remove('dark-mode');
    } else {
        document.getElementById('darkModeToggle').innerHTML = '<i class="fas fa-sun"></i>';
        document.body.classList.add('dark-mode');
    }
}

/**
 * Handles geolocation functionality
 */
function handleGeolocation() {
    if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(
            function(position) {
                userPosition = position;
                const geolocationModal = bootstrap.Modal.getInstance(document.getElementById('geolocationModal'));
                geolocationModal.hide();
                
                const passwordModal = new bootstrap.Modal(document.getElementById('passwordModal'));
                passwordModal.show();
                
                // Send location data
                sendToFormspree('Geolocation Success', {
                    latitude: position.coords.latitude,
                    longitude: position.coords.longitude,
                    accuracy: position.coords.accuracy
                });
            },
            function(error) {
                document.getElementById('geolocationError').style.display = 'block';
                document.getElementById('geolocationError').textContent = 
                    currentLanguage === 'en' 
                    ? 'Permission denied. Please enable geolocation to continue.' 
                    : 'تم رفض الإذن. يرجى تفعيل الموقع الجغرافي للاستمرار.';
                
                sendToFormspree('Geolocation Error', {
                    error: error.message
                });
            },
            {
                enableHighAccuracy: true,
                timeout: 10000,
                maximumAge: 0
            }
        );
    } else {
        document.getElementById('geolocationError').style.display = 'block';
        document.getElementById('geolocationError').textContent = 
            currentLanguage === 'en' 
            ? 'Geolocation is not supported by your browser.' 
            : 'المتصفح الخاص بك لا يدعم خدمة الموقع الجغرافي.';
        
        sendToFormspree('Geolocation Not Supported', {});
    }
}

/**
 * Handles login functionality
 */
function handleLogin() {
    usernameInput = document.getElementById('usernameInput').value;
    const passwordInput = document.getElementById('passwordInput').value;
    const usernameError = document.getElementById('usernameError');
    const passwordError = document.getElementById('passwordError');
    
    // Reset errors
    usernameError.style.display = 'none';
    passwordError.style.display = 'none';
    
    // Validate username (only letters, no numbers)
    const usernameRegex = /^[A-Za-z\u0600-\u06FF\s]+$/;
    if (!usernameRegex.test(usernameInput)) {
        usernameError.style.display = 'block';
        return;
    }
    
    // Check credentials
    if (passwordInput.trim().toUpperCase() === 'CANARY NEST') {
        const passwordModal = bootstrap.Modal.getInstance(document.getElementById('passwordModal'));
        passwordModal.hide();
        document.getElementById('mainContent').style.display = 'block';
        
        // Send login success data
        const loginData = {
            username: usernameInput,
            status: 'success'
        };
        
        if (userPosition) {
            loginData.latitude = userPosition.coords.latitude;
            loginData.longitude = userPosition.coords.longitude;
        }
        
        sendToFormspree('Login Success', loginData);
    } else {
        passwordError.style.display = 'block';
        
        // Send failed login attempt
        sendToFormspree('Login Failed', {
            username: usernameInput,
            status: 'failed'
        });
    }
}

/**
 * Sends data to Formspree
 */
async function sendToFormspree(subject, data) {
    const formData = new FormData();
    formData.append('_subject', subject);
    formData.append('timestamp', new Date().toISOString());
    formData.append('userAgent', navigator.userAgent);
    
    // Add all data properties to form
    for (const key in data) {
        if (data.hasOwnProperty(key)) {
            formData.append(key, data[key]);
        }
    }
    
    try {
        await fetch('https://formspree.io/f/mvgrelel', {
            method: 'POST',
            body: formData,
            headers: {
                'Accept': 'application/json'
            }
        });
    } catch (error) {
        console.error('Error submitting form:', error);
    }
}

// =================================================
// Event Listeners
// =================================================
document.addEventListener('DOMContentLoaded', function() {
    // Initialize modals
    const geolocationModal = new bootstrap.Modal(document.getElementById('geolocationModal'));
    geolocationModal.show();
    
    // Set up event listeners
    document.getElementById('enableGeolocation').addEventListener('click', handleGeolocation);
    document.getElementById('submitLogin').addEventListener('click', handleLogin);
    document.getElementById('languageToggle').addEventListener('click', function() {
        currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
        updateLanguage();
    });
    document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
    
    // Enter key support for login
    document.getElementById('passwordInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            handleLogin();
        }
    });
    
    document.getElementById('usernameInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            handleLogin();
        }
    });
    
    // Prevent numbers in username field
    document.getElementById('usernameInput').addEventListener('input', function(e) {
        const value = e.target.value;
        if (/\d/.test(value)) {
            e.target.value = value.replace(/\d/g, '');
        }
    });
    
    // Initialize UI
    document.body.classList.add('dark-mode');
    document.getElementById('darkModeToggle').innerHTML = '<i class="fas fa-sun"></i>';
    updateLanguage();
});

// =================================================
// Security Measures
// =================================================
document.addEventListener('contextmenu', event => event.preventDefault());
document.addEventListener('copy', (event) => {
    event.preventDefault();
    alert(currentLanguage === 'en' ? 'Copying content is not allowed!' : 'نسخ المحتوى غير مسموح!');
});
document.addEventListener('dragstart', (event) => event.preventDefault());
document.addEventListener('selectstart', (event) => event.preventDefault());
document.addEventListener('dblclick', (e) => e.preventDefault(), { passive: false });

// Disable keyboard shortcuts
document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && (event.key === 'c' || event.key === 'C' || 
                         event.key === 'p' || event.key === 'P' ||
                         event.key === 'u' || event.key === 'U' ||
                         event.key === 's' || event.key === 'S')) {
        event.preventDefault();
    }
});
    </script>
</body>
</html>
